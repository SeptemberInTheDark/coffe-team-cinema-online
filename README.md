# План работ coffe-team-cinema-online


![Static Badge](https://img.shields.io/badge/React-18-yellow)
![Static Badge](https://img.shields.io/badge/Python-3.11-blue)
![Static Badge](https://img.shields.io/badge/Fastapi-0.114.2-blue)
![Static Badge](https://img.shields.io/badge/SQLAlchemy-2.0.34-blue)
![Static Badge](https://img.shields.io/badge/PostgreSQL-16.4-blue)
![Static Badge](https://img.shields.io/badge/Redis-5.0.3-blue)

# Этап 1: Планирование и определение требований

## Определение функциональности:
- Система регистрации и авторизации пользователей.
- Разделение прав пользователей (администраторы, модераторы, пользователи).
- Каталог фильмов с возможностью фильтрации и поиска.
- Просмотр фильмов (потоковая передача видео).
- Система отзывов и оценок фильмов.
- Личный кабинет пользователя (история просмотров, избранное).
- Административная панель для управления контентом (добавление, редактирование фильмов).
- Обработка платежей для подписки или покупки доступа к фильмам.
- 
## Определение стека технологий:
- Backend: FastAPI для создания API.
- Database: PostgreSQL для хранения данных о пользователях, фильмах, комментариях и т.д.
- ORM: SQLAlchemy (возможен Alembic для миграций)
- Caching: Redis
- Logging: стандартная библиотека logging
- Linting: Ruff
- Testing: PyTest
- Authentication: OAuth2 для управления авторизацией и регистрацией.
- Storage: S3-совместимое хранилище (например, AWS S3 или MinIO) для хранения видеофайлов.
- Frontend: React.
- Streaming: Nginx с модулем RTMP.

# Этап 2: Проектирование архитектуры

## Архитектура API:
- Модуль регистрации/авторизации.
- Модуль управления контентом (фильмы, жанры, отзывы, оценки).
- Модуль платежей.
- Модуль стриминга и воспроизведения видео.

## База данных:
- Таблицы для пользователей, фильмов, жанров, отзывов, рейтингов, заказов и платежей.
- Связи между таблицами (один ко многим, многие ко многим).
- Индексы для ускорения запросов к фильтрам (по жанрам, рейтингу, дате выхода).
- 
## Система прав доступа:
- Разделение пользователей на роли (администратор, пользователь).
- Разные уровни доступа к API (например, доступ к административной панели только для администраторов).
- Микросервисная архитектура (при необходимости):
Разделение API на несколько микросервисов: аутентификация, управление контентом, стриминг, платежи.

# Этап 3: Настройка окружения и конфигурации

## Разработка и настройка проекта:
- Создание базовой структуры FastAPI проекта.
- Настройка асинхронных баз данных (SQLAlchemy с поддержкой async).
- Подключение и настройка ORM для работы с базой данных.
- Создание моделей данных:
- Определение моделей для пользователей, фильмов, жанров, отзывов и платежей.
- 
## Аутентификация и авторизация:
- Реализация OAuth2 токенами для авторизации пользователей.
- Маршруты для регистрации, входа и восстановления пароля.
- 
# Этап 4: Реализация функционала

## Модуль пользователей:
- Регистрация пользователей.
- Авторизация через токены.
- Роли пользователей и права доступа.
- 
## Модуль фильмов:
- API для управления фильмами: добавление, редактирование, удаление.
- Возможность загрузки видеофайлов в облачное хранилище.
- API для поиска и фильтрации фильмов по жанру, году выпуска, рейтингу.

## Модуль отзывов и рейтингов:
- Добавление и управление отзывами на фильмы.
- Добавление системы оценок фильмов с вычислением среднего рейтинга.
- 
## Модуль стриминга видео:
- Интеграция потоковой передачи через Nginx RTMP модуль или использование внешнего CDN для стриминга.
- Обеспечение защиты контента через токены или временные ссылки (при необходимости).

## Модуль платежей:
- Интеграция с платежными системами (Stripe, PayPal) для покупки подписки или оплаты за отдельные фильмы.
- Обработка транзакций и хранение истории платежей.

## Личный кабинет пользователя:
- Просмотр истории просмотров.
- Управление избранными фильмами.

# Этап 5: Тестирование оптимизация и linting

## Написание тестов:
- Юнит-тесты для всех API эндпоинтов.
- linting, создание един6ого стандарта написания кода, linting на протяжении все разработки приложения
- Покрытие тестами не менее 70% кода
- Тестирование производительности (нагрузочное тестирование для стриминга).

## Оптимизация производительности:
- Использование кеширования для популярных фильмов (Redis).
- Оптимизация запросов к базе данных (использование индексов, кэширование).
- Оптимизация загрузки и доставки видео (CDN, сжатие видео).
- 
# Этап 6: Развертывание

## Подготовка окружения:
- Настройка серверов или использование облачных сервисов.
- Настройка Docker для контейнеризации приложения.
- Настройка CI/CD для автоматизации развертывания.

## Мониторинг и логирование:
- Настройка логирования для отслеживания ошибок.

## Защита и безопасность:
- Использование SSL сертификатов для защиты соединений.
- Защита API от атак (например, защита от брутфорса, SQL-инъекций).

# Этап 7: Поддержка и дальнейшее развитие
- Реализация новых функций по запросам пользователей.
- Поддержка мобильных устройств и интеграция с приложениями.
- Регулярное обновление безопасности и производительности.